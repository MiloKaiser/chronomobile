<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Temps dérobé par mon téléphone</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 700px;
      margin: 2rem auto;
      padding: 0 1rem;
      line-height: 1.5;
      color: #222;
      background-color: #fefefe;
    }
    label {
      font-size: 1.2rem;
      display: block;
      margin-bottom: 0.5rem;
      color: #333;
    }
    input[type="time"] {
      width: 120px;
      padding: 0.4rem;
      font-size: 1.1rem;
    }
    button {
      display: block;
      margin: 1.5rem auto 0;
      padding: 0.6rem 1.5rem;
      cursor: pointer;
      background-color: #ffb800; /* orange fluo */
      border: none;
      color: #222;
      font-weight: bold;
      font-size: 1.2rem;
      border-radius: 6px;
      box-shadow: 0 0 10px #ffb800aa;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #ffa500;
    }
    .result {
      margin-top: 2rem;
      white-space: pre-line;
      font-size: 1.1rem;
      color: #111;
    }
  </style>
</head>
<body>
  <form id="form" aria-label="Calcul du temps passé sur téléphone">
    <label for="timeInput">Durée moyenne passée sur votre téléphone par jour (HH:MM) :</label>
    <input type="time" id="timeInput" name="timeInput" step="60" value="00:00" required />
    <button type="submit">Voir ce que mon téléphone me dérobe</button>
  </form>

  <div id="output" class="result" aria-live="polite" role="region"></div>

  <script>
    const form = document.getElementById('form');
    const output = document.getElementById('output');

    const data = [
      { action: 'lire', count: 30, description: 'petits livres', hours: 12 },
      { action: 'lire', count: 12, description: 'gros romans', hours: 30 },
      { action: 'regarder', count: 166, description: 'films', hours: 2.33 },
      { action: 'faire', count: 91, description: 'longues promenades en forêt', hours: 4 },
      { action: 'faire', count: 456, description: 'séances de sport de 30 minutes, douche comprise', hours: 0.8 },
      { action: 'visiter', count: 122, description: 'musées', hours: 3 },
      { action: 'écrire', count: 1, description: 'livres', hours: 400 },
      { action: 'dessiner intégralement', count: 1, description: 'BD', hours: 500 },
      { action: 'écrire le scénario de', count: 4, description: 'courts métrages', hours: 100 },
      { action: 'écrire le scénario de', count: 1, description: 'longs métrages', hours: 500 },
      { action: 'apprendre à jouer basiquement à', count: 2, description: 'instruments de musique', hours: 200 },
      { action: 'pouvoir comprendre les dialogues dans', count: 1, description: 'langues étrangères', hours: 250 },
      { action: 'étudier pour l\'équivalent de', count: 15, description: 'crédits (ECTS)', hours: 25 },
    ];

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      const timeStr = document.getElementById('timeInput').value;
      if (!timeStr || timeStr === "00:00") {
        output.textContent = 'Veuillez entrer une durée supérieure à 00:00.';
        return;
      }

      const [hoursStr, minutesStr] = timeStr.split(':');
      const hours = parseInt(hoursStr, 10);
      const minutes = parseInt(minutesStr, 10);
      const totalHoursPerDay = hours + minutes / 60;

      const hoursPerYear = totalHoursPerDay * 365;
      const daysPerYear = hoursPerYear / 24;
      const monthsPerYear = daysPerYear / 30;

      let text = `Je passe environ ${hoursPerYear.toFixed(0)} heures par an sur mon téléphone,\n`;
      text += `soit ${daysPerYear.toFixed(0)} jours, du matin au soir (en comptant 8h de sommeil).\n`;
      text += `Je passe ${monthsPerYear.toFixed(1)} mois de l'année sur mon téléphone.\n\n`;

      text += `À la place, je pourrais\n`;

      data.slice(0,4).forEach(item => {
        const nb = Math.floor(hoursPerYear / item.hours * item.count);
        text += `${item.action} ${nb} ${item.description} (${formatDuration(item.hours)})\n`;
      });

      // Puis le reste en liste simple
      data.slice(4).forEach(item => {
        const nb = Math.floor(hoursPerYear / item.hours * item.count);
        text += `${item.action} ${nb} ${item.description} (${formatDuration(item.hours)})\n`;
      });

      output.textContent = text;
    });

    function formatDuration(h) {
      const totalMinutes = Math.round(h * 60);
      const hh = Math.floor(totalMinutes / 60);
      const mm = totalMinutes % 60;
      if (hh > 0 && mm > 0) return `${hh}h${mm.toString().padStart(2,'0')}`;
      if (hh > 0) return `${hh}h`;
      return `${mm}min`;
    }
  </script>
</body>
</html>
